(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{391:function(s,a,t){"use strict";t.r(a);var n=t(41),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"webpack入门基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack入门基础"}},[s._v("#")]),s._v(" webpack入门基础")]),s._v(" "),t("h2",{attrs:{id:"webpack-核心概念之-entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念之-entry"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/entry-points/",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 核心概念之 entry"),t("OutboundLink")],1)]),s._v(" "),t("ol",[t("li",[s._v("单页和多页的配置语法")]),s._v(" "),t("li",[s._v("v4 以上不推荐单独将第三库代码打包为一个单独的 vendor\n"),t("ul",[t("li",[s._v("利用"),t("strong",[s._v("optimization.splitChunks")]),s._v(" 选项，将 vendor 和 app(应用程序) 模块分开，并为其创建一个单独的文件。不要 为 vendor 或其他不是执行起点创建 entry")])])])]),s._v(" "),t("h2",{attrs:{id:"webpack-核心概念之-output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念之-output"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/output/",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 核心概念之 output"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("output 属性告诉 webpack 在哪里输出它所创建的 bundle，以及如何命名这些文件")]),s._v(" "),t("p",[s._v("多页应用可利用占位符来打包所有的 chunk")]),s._v(" "),t("h2",{attrs:{id:"webpack-核心概念之-loaders"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念之-loaders"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/loaders/#example",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 核心概念之 loaders"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("webpack 只能理解 JavaScript 和 JSON 文件，这是 webpack 开箱可用的自带能力。loader 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 模块，以供应用程序使用，以及被添加到依赖图中。")]),s._v(" "),t("ol",[t("li",[s._v("loader 支持链式调用。从后向前执行调用。前面的 loader 将执行结果返回给后面的 loader")]),s._v(" "),t("li",[s._v("loader 可以是同步的，也可以是异步的。")])]),s._v(" "),t("h2",{attrs:{id:"webpack-核心概念之-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念之-plugins"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/concepts/plugins/",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 核心概念之 plugins"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。")]),s._v(" "),t("p",[s._v("常用的 plugins")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://shenggao.oss-cn-beijing.aliyuncs.com/blog/2020/11/plugins.jpeg",alt:"plugins"}})]),s._v(" "),t("h2",{attrs:{id:"webpack-核心概念之-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-核心概念之-mode"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/configuration/mode/#usage",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 核心概念之 mode"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("webpack 会开启相应模式的内置优化")]),s._v(" "),t("p",[s._v("如果没有设置，mode 默认为 production")]),s._v(" "),t("h2",{attrs:{id:"解析-es6-和-react-jsx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析-es6-和-react-jsx"}},[s._v("#")]),s._v(" 解析 es6 和 react jsx")]),s._v(" "),t("h3",{attrs:{id:"es6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es6"}},[s._v("#")]),s._v(" es6")]),s._v(" "),t("p",[s._v("默认支持解析 js，但是解析 es6 需要编译器去兼容低版本的浏览器")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# babel-loader 转码依赖的 babel-core 和 env")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @babel/core @babel/preset-env babel-loader\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公共方法避免重复引入辅助代码。引入 @babel/plugin-transform-runtime 并且使所有辅助代码从这里引用。@babel/plugin-transform-runtime 依赖于 @babel-runtime")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @babel/plugin-transform-runtime @babel/runtime\n\n")])])]),t("h3",{attrs:{id:"jsx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jsx"}},[s._v("#")]),s._v(" jsx")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" react react-dom\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @babel/preset-react\n")])])]),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc 文件")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"presets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-react"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugins"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/plugin-transform-runtime"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"解析-css、less-和-sass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析-css、less-和-sass"}},[s._v("#")]),s._v(" 解析 css、less 和 sass")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sass 解析依赖于 node-sass 或者 dart-sass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# style-loader 用于将样式用 style 标签插入到 head 节点中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" style-loader css-loader node-sass sass-loader\n\n")])])]),t("h2",{attrs:{id:"解析图片和字体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析图片和字体"}},[s._v("#")]),s._v(" 解析图片和字体")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file-loader 解析文件。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" file-loader\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# url-loader 可以将文件打包为 base-64 内联引入到文件中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" url-loader\n")])])]),t("h2",{attrs:{id:"webpack-中的文件监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-中的文件监听"}},[s._v("#")]),s._v(" webpack 中的文件监听")]),s._v(" "),t("p",[s._v("两种方式")]),s._v(" "),t("p",[s._v("1 --watch")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --watch"')]),s._v("\n")])])]),t("p",[s._v("2 watch:true")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    watch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    watchOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        ignored"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监听到变化 300 ms 后再去执行")]),s._v("\n        aggregateTimeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1s 询问 1000 次指定的文件有没有变化")]),s._v("\n        poll"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("缺陷：每次需要手动刷新浏览器。")]),s._v(" "),t("h2",{attrs:{id:"webpack-中的热更新以及原理分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-中的热更新以及原理分析"}},[s._v("#")]),s._v(" webpack 中的热更新以及原理分析")]),s._v(" "),t("h3",{attrs:{id:"实现方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现方式"}},[s._v("#")]),s._v(" 实现方式")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("webpack-dev-server")])]),s._v(" "),t("li",[t("p",[s._v("webpack-dev-middleware")])])]),s._v(" "),t("h2",{attrs:{id:"文件指纹策略-chunkhash、contenthash-和-hash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件指纹策略-chunkhash、contenthash-和-hash"}},[s._v("#")]),s._v(" 文件指纹策略：chunkHash、contentHash 和 hash")]),s._v(" "),t("p",[s._v("给构建后的文件创建 hash 值，可以起到版本管理的作用。未改变的文件使用浏览器缓存，优化体验。")]),s._v(" "),t("p",[s._v("使用：")]),s._v(" "),t("p",[s._v("hash: 每一次构建，只要项目文件有修改，整个项目构建的 hash 值就会更改\nchunkHash: 和 webpack 打包的 chunk 有关，不同的 entry 会生成不同的 chunkhash 值\ncontenthash: 根据文件内容来定义 hash，文件内容不变，则 contenthash 不变")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// js 添加 chunkhash")]),s._v("\n    output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name]_[chunkhash:8].js'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// css 使用 MiniCssExtractPlugin 提取成单独的 css文件后，添加 contenthash")]),s._v("\n    plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MiniCssExtractPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name]_[contenthash:8].css'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 图片则添加 hash(相对于自身的内容变化)")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpe?g|gif)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name]_[hash:8].[ext]'")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("h2",{attrs:{id:"html、css-和-javascript-代码压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#html、css-和-javascript-代码压缩"}},[s._v("#")]),s._v(" html、css 和 javascript 代码压缩")])])}),[],!1,null,null,null);a.default=e.exports}}]);