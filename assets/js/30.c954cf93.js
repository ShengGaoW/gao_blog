(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{392:function(s,t,a){"use strict";a.r(t);var n=a(26),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"如何发布一个-npm-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何发布一个-npm-包"}},[s._v("#")]),s._v(" 如何发布一个 npm 包")]),s._v(" "),a("h2",{attrs:{id:"一-背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-背景"}},[s._v("#")]),s._v(" 一 背景")]),s._v(" "),a("p",[s._v("在工作时，突然接到经理的一个要求，需要将一个react的高阶组件函数封装成一个npm包。之前从没弄过，当场还是有些懵逼的，但是这毕竟是工作，不能推脱。于是开始了学习、汤坑之旅。最终包发布，线上项目成功使用，虽然导致了一次线上故障，但还是快速地fix掉。吃一堑长一智，记录一下整个发布的过程和遇到的一些问题。")]),s._v(" "),a("h2",{attrs:{id:"二-流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-流程"}},[s._v("#")]),s._v(" 二 流程")]),s._v(" "),a("blockquote",[a("p",[s._v("npm 包可以将可复用逻辑封装成一个工具库，依赖 npm 的强大生态，可以在项目中引入，让代码变得更加简洁，提高效率。")])]),s._v(" "),a("ol",[a("li",[s._v("在 npm 官网注册一个账号。")]),s._v(" "),a("li",[s._v("在本地登录 npm 账号。")]),s._v(" "),a("li",[s._v("编写 npm 包内容。")]),s._v(" "),a("li",[s._v("发布包。")])]),s._v(" "),a("h2",{attrs:{id:"三-开发过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-开发过程"}},[s._v("#")]),s._v(" 三 开发过程")]),s._v(" "),a("h3",{attrs:{id:"_1-注册npm账号。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-注册npm账号。"}},[s._v("#")]),s._v(" 1 注册npm账号。")]),s._v(" "),a("p",[s._v("附录网站： https://www.npmjs.com/")]),s._v(" "),a("h3",{attrs:{id:"_2-在本地登录npm账号。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-在本地登录npm账号。"}},[s._v("#")]),s._v(" 2 在本地登录npm账号。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n")])])]),a("p",[s._v("输入在npm官网注册的账号密码即可。")]),s._v(" "),a("h3",{attrs:{id:"_3-编写npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-编写npm包"}},[s._v("#")]),s._v(" 3 编写npm包")]),s._v(" "),a("h4",{attrs:{id:"_3-1-执行以下命令-创建一个npm模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-执行以下命令-创建一个npm模块"}},[s._v("#")]),s._v(" 3.1 执行以下命令，创建一个npm模块")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" npmDir\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" npmDir\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])])]),a("h4",{attrs:{id:"_3-2-安装webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-安装webpack"}},[s._v("#")]),s._v(" 3.2 安装webpack")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" webpack webpack-ci -D\n")])])]),a("p",[s._v("在本地开发时，通常考虑更多的是代码的可读性，以便于在逻辑出错时，可debug其源码找到问题。然而发至线上时，则考虑更多的是包的体积，越小即代表着更快的载入。\n同时，一个强大的包应该支持多种方式导入，例如es module的import, commonjs的require以及amd的古老方式。\n为做到以上两点，选择了webpack作为构建工具。虽然用webpack个人感觉稍微有点重，但是它可扩展性强，日后利用loader以及plugin可以实现更多的编译以及优化需求。")]),s._v(" "),a("h4",{attrs:{id:"_3-3-梳理项目目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-梳理项目目录"}},[s._v("#")]),s._v(" 3.3 梳理项目目录")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://shenggao.oss-cn-beijing.aliyuncs.com/blog/2020/05/31/15909328330064.jpg",alt:""}}),s._v("\nsrc下的index.js对应着包的内容。\n最外层index.js为所暴露的出口文件。\ndist目录存放webpack打包后的文件。")]),s._v(" "),a("h4",{attrs:{id:"_3-4-编写对应内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-编写对应内容"}},[s._v("#")]),s._v(" 3.4 编写对应内容")]),s._v(" "),a("h5",{attrs:{id:"_3-4-1-webpack-config-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-webpack-config-js"}},[s._v("#")]),s._v(" 3.4.1 webpack.config.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" TerserPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'terser-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'none'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'add'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'add.min'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'add'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        libraryTarget"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'umd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        libraryExport"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        globalObject"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    optimization"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        minimize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        minimizer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TerserPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                include"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.min\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ol",[a("li",[a("p",[s._v("mode: 支持开发版代码不压缩，线上版本压缩。此处将mode设置为'none'，默认全不压缩，然后自己用插件来配置压缩代码文件。")])]),s._v(" "),a("li",[a("p",[s._v("entry: 两个入口，add为在开发时导入，add.min文件为在线上时导入。")])]),s._v(" "),a("li",[a("p",[s._v("output:")]),s._v(" "),a("ul",[a("li",[s._v("filename: 设置占位符。默认为entry入口文件名字")]),s._v(" "),a("li",[s._v("library: 库的返回值赋值给变量或者属性 add。例如script引入方式，则可以全局使用add函数。此属性和library配合使用")]),s._v(" "),a("li",[s._v("libraryTarget: 变量暴露的方式。设置为umd即可支持es module、cmd以及script引入脚本的方式使用。")]),s._v(" "),a("li",[s._v("libraryExport: 配置要导出的模块中那些子模块需要被导出。只有output.libraryTarget被设置成commonjs或者commonjs2的时候才有效。我的导出方式是export default，因此我将其直接导出。如果不填此项，则默认引入的是module对象。调用方式会是 .default形式。")])])]),s._v(" "),a("li",[a("p",[s._v("optimization: 利用TerserPlugin插件进行压缩代码,默认只压缩.min结尾的输出文件。")])])]),s._v(" "),a("h4",{attrs:{id:"_3-4-2-模块主要内容-src-index-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-模块主要内容-src-index-js"}},[s._v("#")]),s._v(" 3.4.2 模块主要内容 src/index.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("rest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'哈哈'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" add\n")])])]),a("p",[s._v("简单的一个测试函数")]),s._v(" "),a("h4",{attrs:{id:"_3-4-3-main入口文件index-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-3-main入口文件index-js"}},[s._v("#")]),s._v(" 3.4.3 main入口文件index.js")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist/add.min.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist/add.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("根据环境变量自动引入相关版本。")]),s._v(" "),a("h4",{attrs:{id:"_3-4-4-构建命令。package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-4-构建命令。package-json"}},[s._v("#")]),s._v(" 3.4.4 构建命令。package.json")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prepublish"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),a("p",[s._v("发布包时可以手动执行build命令后后发布，也可通过prepublish钩子自动编译然后发布。")]),s._v(" "),a("h3",{attrs:{id:"_4-发布包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-发布包"}},[s._v("#")]),s._v(" 4 发布包")]),s._v(" "),a("p",[s._v("修改 package.json 中的name字段，即包在npm中的名字。小提示，想好名字之后，最好到npm官网上搜索一下这个包有没有被别人注册，有的话就要换一个了。\n修改版本号，可手动修改，也可通过npm  version命令进行更换。个人习惯于后面。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改版本号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version major "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" minorr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" patch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布包到npm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n")])])]),a("p",[s._v("然后在npm官网上搜索一下，便可以找到你发布的包了。开心。")]),s._v(" "),a("h2",{attrs:{id:"四-遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-遇到的问题"}},[s._v("#")]),s._v(" 四 遇到的问题")]),s._v(" "),a("h3",{attrs:{id:"_4-1-在服务端渲染-ssr-的项目中引入该包时-会报错误-window-is-not-defined"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-在服务端渲染-ssr-的项目中引入该包时-会报错误-window-is-not-defined"}},[s._v("#")]),s._v(" 4.1 在服务端渲染(ssr)的项目中引入该包时，会报错误 ”window is not defined“")]),s._v(" "),a("p",[s._v("本以为是包中代码逻辑错误，把项目中所有引入到window的地方全都用typeof兼容了一遍，本想完事大吉，结果还是报这个错误。上网搜索各种帖子无效之后，我感觉是webpack编译打包后出了问题，于是报着试一试的心态去看编译后的未压缩版本代码，果然发现了问题。\n"),a("img",{attrs:{src:"https://shenggao.oss-cn-beijing.aliyuncs.com/blog/2020/05/31/15909384148354.jpg",alt:""}}),s._v("\n如图所示，打包后的文件为一个自运行匿名函数，函数第一个实参竟然是window。\n于是去webpack官网查看相关文档，看其是否能配置。果然找到了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://shenggao.oss-cn-beijing.aliyuncs.com/blog/2020/05/31/15909386807183.jpg",alt:"-w728"}})]),s._v(" "),a("p",[s._v("修改globalObject属性，将第一个参数设置为this，解决问题。")]),s._v(" "),a("blockquote",[a("p",[s._v("附录\ngihub: https://github.com/ShengGaoW/shenggao-test-npm")])])])}),[],!1,null,null,null);t.default=r.exports}}]);