<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>蓝鲸一体化运营平台技术方案总结 | 大芒果</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://shenggao.oss-cn-beijing.aliyuncs.com/info/head.jpg">
    <meta name="description" content="大芒果的博客">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f9cc1def.css" as="style"><link rel="preload" href="/blog/assets/js/app.1c84c946.js" as="script"><link rel="preload" href="/blog/assets/js/4.3835d62b.js" as="script"><link rel="preload" href="/blog/assets/js/2.5b556ab7.js" as="script"><link rel="preload" href="/blog/assets/js/52.a1565c31.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.a2497a5f.js"><link rel="prefetch" href="/blog/assets/js/11.9cb3e517.js"><link rel="prefetch" href="/blog/assets/js/12.60ee78e0.js"><link rel="prefetch" href="/blog/assets/js/13.2e12e30e.js"><link rel="prefetch" href="/blog/assets/js/14.df4bb3d1.js"><link rel="prefetch" href="/blog/assets/js/15.23fd5821.js"><link rel="prefetch" href="/blog/assets/js/16.3630531e.js"><link rel="prefetch" href="/blog/assets/js/17.7d133626.js"><link rel="prefetch" href="/blog/assets/js/18.1647088a.js"><link rel="prefetch" href="/blog/assets/js/19.8b5b7046.js"><link rel="prefetch" href="/blog/assets/js/20.937dfb9a.js"><link rel="prefetch" href="/blog/assets/js/21.7228a437.js"><link rel="prefetch" href="/blog/assets/js/22.1c0167a3.js"><link rel="prefetch" href="/blog/assets/js/23.67cfe3f0.js"><link rel="prefetch" href="/blog/assets/js/24.0d0b2e3c.js"><link rel="prefetch" href="/blog/assets/js/25.18191db0.js"><link rel="prefetch" href="/blog/assets/js/26.68ef03e4.js"><link rel="prefetch" href="/blog/assets/js/27.7caaab98.js"><link rel="prefetch" href="/blog/assets/js/28.ceaa0dc5.js"><link rel="prefetch" href="/blog/assets/js/29.ddebaa16.js"><link rel="prefetch" href="/blog/assets/js/3.7168104b.js"><link rel="prefetch" href="/blog/assets/js/30.a3491553.js"><link rel="prefetch" href="/blog/assets/js/31.75ad6ea9.js"><link rel="prefetch" href="/blog/assets/js/32.211df815.js"><link rel="prefetch" href="/blog/assets/js/33.e9912ff8.js"><link rel="prefetch" href="/blog/assets/js/34.ac00005d.js"><link rel="prefetch" href="/blog/assets/js/35.c7847b8a.js"><link rel="prefetch" href="/blog/assets/js/36.e5561604.js"><link rel="prefetch" href="/blog/assets/js/37.30dc0fa5.js"><link rel="prefetch" href="/blog/assets/js/38.e52d414d.js"><link rel="prefetch" href="/blog/assets/js/39.a4024f22.js"><link rel="prefetch" href="/blog/assets/js/40.d72c1364.js"><link rel="prefetch" href="/blog/assets/js/41.1f2dd121.js"><link rel="prefetch" href="/blog/assets/js/42.f115f08e.js"><link rel="prefetch" href="/blog/assets/js/43.bd6c2e8c.js"><link rel="prefetch" href="/blog/assets/js/44.97cb6b2e.js"><link rel="prefetch" href="/blog/assets/js/45.25194c0c.js"><link rel="prefetch" href="/blog/assets/js/46.91f4b8e5.js"><link rel="prefetch" href="/blog/assets/js/47.43d5588d.js"><link rel="prefetch" href="/blog/assets/js/48.41f223ae.js"><link rel="prefetch" href="/blog/assets/js/49.13318f38.js"><link rel="prefetch" href="/blog/assets/js/5.c4ceae68.js"><link rel="prefetch" href="/blog/assets/js/50.fa0f09dc.js"><link rel="prefetch" href="/blog/assets/js/51.f1ab987c.js"><link rel="prefetch" href="/blog/assets/js/53.5590cd7d.js"><link rel="prefetch" href="/blog/assets/js/54.f657e1ab.js"><link rel="prefetch" href="/blog/assets/js/55.3b58c0fa.js"><link rel="prefetch" href="/blog/assets/js/56.b032d4a0.js"><link rel="prefetch" href="/blog/assets/js/57.be26d9e7.js"><link rel="prefetch" href="/blog/assets/js/58.3c08db73.js"><link rel="prefetch" href="/blog/assets/js/59.70fdeeca.js"><link rel="prefetch" href="/blog/assets/js/6.cc387b00.js"><link rel="prefetch" href="/blog/assets/js/60.39ff320b.js"><link rel="prefetch" href="/blog/assets/js/61.1de6e9ff.js"><link rel="prefetch" href="/blog/assets/js/62.c2603529.js"><link rel="prefetch" href="/blog/assets/js/63.e036346b.js"><link rel="prefetch" href="/blog/assets/js/64.4fcfbc3c.js"><link rel="prefetch" href="/blog/assets/js/65.bfb0aec5.js"><link rel="prefetch" href="/blog/assets/js/66.c3b973e8.js"><link rel="prefetch" href="/blog/assets/js/67.05c67147.js"><link rel="prefetch" href="/blog/assets/js/68.931b743d.js"><link rel="prefetch" href="/blog/assets/js/69.51533509.js"><link rel="prefetch" href="/blog/assets/js/7.b0d5db69.js"><link rel="prefetch" href="/blog/assets/js/70.b0550fad.js"><link rel="prefetch" href="/blog/assets/js/71.b1c6ec9f.js"><link rel="prefetch" href="/blog/assets/js/72.2b9529b8.js"><link rel="prefetch" href="/blog/assets/js/73.eb455991.js"><link rel="prefetch" href="/blog/assets/js/74.93e47390.js"><link rel="prefetch" href="/blog/assets/js/75.bf7e7027.js"><link rel="prefetch" href="/blog/assets/js/76.eff90f3b.js"><link rel="prefetch" href="/blog/assets/js/77.d892bb21.js"><link rel="prefetch" href="/blog/assets/js/78.fbd762cf.js"><link rel="prefetch" href="/blog/assets/js/79.c51cf123.js"><link rel="prefetch" href="/blog/assets/js/8.a360d770.js"><link rel="prefetch" href="/blog/assets/js/80.3a9cf929.js"><link rel="prefetch" href="/blog/assets/js/81.d36a3d5e.js"><link rel="prefetch" href="/blog/assets/js/82.05703147.js"><link rel="prefetch" href="/blog/assets/js/83.eadf2ac0.js"><link rel="prefetch" href="/blog/assets/js/84.21504b16.js"><link rel="prefetch" href="/blog/assets/js/85.cebb8236.js"><link rel="prefetch" href="/blog/assets/js/9.0b31ebea.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f9cc1def.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="https://shenggao.oss-cn-beijing.aliyuncs.com/info/head.jpg" alt="大芒果" class="logo"> <span class="site-name can-hide">大芒果</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/fronted/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/blog/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/note/" class="nav-link">
  读书&amp;旅行
</a></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机" class="dropdown-title"><span class="title">计算机</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机" class="mobile-dropdown-title"><span class="title">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/science/data_struct/" class="nav-link">
  数据结构与算法
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/fronted/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/blog/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/note/" class="nav-link">
  读书&amp;旅行
</a></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机" class="dropdown-title"><span class="title">计算机</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机" class="mobile-dropdown-title"><span class="title">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/science/data_struct/" class="nav-link">
  数据结构与算法
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/fronted/js/函数式编程.html" class="sidebar-link">函数式编程</a></li><li><a href="/blog/fronted/js/如何发布npm包.html" class="sidebar-link">如何发布一个 npm 包</a></li><li><a href="/blog/fronted/js/数组去重.html" class="sidebar-link">数组去重</a></li><li><a href="/blog/fronted/js/bind、call和apply实现.html" class="sidebar-link">bind、call和apply自定义实现</a></li><li><a href="/blog/fronted/js/拖拽实现.html" class="sidebar-link">js原生实现拖拽</a></li><li><a href="/blog/fronted/js/数据类型检测.html" class="sidebar-link">JS数据类型检测</a></li><li><a href="/blog/fronted/js/ajax、fetch和jsonp.html" class="sidebar-link">客户端请求</a></li><li><a href="/blog/fronted/js/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/fronted/js/h5新增事件.html" class="sidebar-link">HTML5事件</a></li><li><a href="/blog/fronted/js/react框架key的作用.html" class="sidebar-link">深入理解 key（react）</a></li><li><a href="/blog/fronted/js/reactHook问题总结.html" class="sidebar-link">reactHook 理解与应用</a></li><li><a href="/blog/fronted/js/ts学习.html" class="sidebar-link">ts 学习笔记</a></li><li><a href="/blog/fronted/js/事件循环.html" class="sidebar-link">事件循环</a></li><li><a href="/blog/fronted/js/pwa.html" class="sidebar-link">前端本地缓存之PWA篇</a></li><li><a href="/blog/fronted/js/taro开发问题总结.html" class="sidebar-link">taro 开发问题</a></li><li><a href="/blog/fronted/js/es5继承.html" class="sidebar-link">ES5继承</a></li><li><a href="/blog/fronted/js/跨浏览器事件对象.html" class="sidebar-link">跨浏览器事件对象</a></li><li><a href="/blog/fronted/js/前端本地缓存概况之浏览器缓存策略.html" class="sidebar-link">前端本地缓存概况之浏览器缓存策略</a></li><li><a href="/blog/fronted/js/cloneDeep.html" class="sidebar-link">cloneDeep</a></li><li><a href="/blog/fronted/js/js数据类型检测.html" class="sidebar-link">JS数据类型检测</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>h5</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="蓝鲸一体化运营平台技术方案总结"><a href="#蓝鲸一体化运营平台技术方案总结" class="header-anchor">#</a> 蓝鲸一体化运营平台技术方案总结</h1> <p><a name="v5giit"></a></p> <h1 id="项目背景"><a href="#项目背景" class="header-anchor">#</a> <a href="#v5giit"></a>项目背景</h1> <p>蓝鲸一体化运营平台，主要致力于解决原有平台搭建配置复杂、不连续，配置成本高，数据分析困难等问题。我们的目标是统一流程、配置方式，降低运营配置成本，让运营把重心放到如何设计策划活动模型，通过数据反馈，不断的改进活动模型的方案，使得营销全生命周期能够配置化，数据化，智能化。</p> <p><a name="0u0eyb"></a></p> <h2 id="核心业务流程"><a href="#核心业务流程" class="header-anchor">#</a> <a href="#0u0eyb"></a>核心业务流程</h2> <p>一个完整的业务流程需要通过：活动策划、页面设计、模块开发、页面搭建、页面投放、数据监控、数据分析等，多个阶段来实施活动推广、数据统计、策略复盘，再不断优化策略，用户偏好，内容，从而提高运营活动的转化率。<br><img src="https://cdn.nlark.com/lark/0/2018/png/114273/1539527770805-5a31bc80-b882-497e-80cb-62a77a72bc3d.png#width=827" alt=""></p> <p><a name="g4nxcu"></a></p> <h2 id="搭建业务流程"><a href="#搭建业务流程" class="header-anchor">#</a> <a href="#g4nxcu"></a>搭建业务流程</h2> <p><img src="https://cdn.nlark.com/lark/0/2018/png/114273/1539527664871-868af346-befe-4759-ad57-2e7711bfbbe8.png#width=827" alt=""><br>如上图所示，蓝鲸平台为运营提供了一站式服务平台：</p> <ul><li><p>物料准备：蓝鲸集成了各平台的数据接口，在蓝鲸可以直接搜索到相关物料名称，选中到模块配置中即可。</p></li> <li><p>页面搭建：蓝鲸提供了模块管理、页面管理、模板管理、项目管理、策略管理、预览、图片上传等服务。</p></li> <li><p>数据定投：蓝鲸平台所有模块都支持：按照人群、终端、渠道、时段的维度进行数据定投，不再需要人工干预手动切换。</p></li> <li><p>页面投放：现有平台已经支持H5、Rax、PC、TV多端页面搭建、并能够通过页面数据，自动化生成埋点投放链接。</p></li></ul> <p><a name="mbd7ne"></a></p> <h1 id="平台架构设计"><a href="#平台架构设计" class="header-anchor">#</a> <a href="#mbd7ne"></a>平台架构设计</h1> <p><a name="4mzxtm"></a></p> <h2 id="平台简介"><a href="#平台简介" class="header-anchor">#</a> <a href="#4mzxtm"></a>平台简介</h2> <p>随着业务的发展，蓝鲸平台以解决多平台、多终端、多业务场景，所带来的前端开发成本不可控的问题，为目标的核心价值。提出代码复用、解决方案复用、业务复用的方案，来减少业务带来的研发成本，将重复的工作交给平台和机器来解决，将创新性的研发工作与场景，留给研发团队，才能有效的撬动业务需求的杠杆。</p> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546425154449-52f4ce94-7278-46a7-92b0-aaeaf996dd45.png#width=573" alt=""> <a name="sdnftm"></a></p> <h2 id="平台优势"><a href="#平台优势" class="header-anchor">#</a> <a href="#sdnftm"></a>平台优势</h2> <p>蓝鲸平台结合了运营的实际业务场景，为运营优化各个方面的搭建体验，大幅提升了运营效率。</p> <ul><li><p>一站式可视化搭建，打通接入了各底层数据平台；</p></li> <li><p>支持多平台的数据源导入；</p></li> <li><p>丰富的表单录入组件；</p></li> <li><p>模块级的跨页面数据复制；</p></li> <li><p>多套配置数据分发，可通过（人群、时间、渠道、终端）划分策略；</p></li></ul> <p><a name="8y3hcx"></a></p> <h2 id="平台的架构设计"><a href="#平台的架构设计" class="header-anchor">#</a> <a href="#8y3hcx"></a>平台的架构设计</h2> <p>整个平台系统依赖了多个子系统，如：ABS、DE、Air、UPX、DE、VMP、MRP等系统，将原有割裂的业务系统，通过集团内部的RPC服务HSF Service将子系统数据集成打通，从而实现一站式的服务平台。</p> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546425174558-957504e3-3de4-45bb-afdc-ce1bed15df39.png#width=659" alt=""></p> <p><a name="geznpq"></a></p> <h3 id="页面搭建"><a href="#页面搭建" class="header-anchor">#</a> <a href="#geznpq"></a>页面搭建</h3> <p>页面搭建时蓝鲸平台中一项重要的基础能力，通过搭建方式产出页面，从设计之初，我们考虑到为了满足各种不同的搭建业务场景，将页面抽象为3个部分： <code>页面模板(Xtemplate)</code> 、 <code>页面构建脚本(PageInit)</code> 、 <code>模块脚本(Mod)</code> ，这三个部分，可以根据需求适应不同页面的渲染诉求，将PC/Phone/TV的搭建业务抽离出来，可以在不同的业务规范，来构建自己的场景需求。<br><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546425198602-aa12e398-f722-4909-bf24-4a69b84d66ef.png#width=827" alt=""></p> <p>注：图中Solution解决方案中包含了（页面模板Xtemplate、页面脚本PageInit）</p> <p><a name="wll0or"></a></p> <h4 id="场景支持"><a href="#场景支持" class="header-anchor">#</a> <a href="#wll0or"></a>场景支持</h4> <ul><li><p>支持PC /TV /Phone各终端的页面搭建。</p></li> <li><p>支持H5/Rax 两种模式的页面渲染，可根据各自的业务场景，动态扩展逻辑。</p></li></ul> <p><a name="biuwqb"></a></p> <h4 id="复用性"><a href="#复用性" class="header-anchor">#</a> <a href="#biuwqb"></a>复用性</h4> <ul><li><p>模块复用：模块一次开发后，可以满足运营的常见诉求；</p></li> <li><p>数据复用：由于模块会根据不同的数据配置，展现不同的形态，所以模块的数据源，需要多份数据源动态切换，才能减少日常配置的复杂度。</p></li> <li><p>模板复用：由于运营分为不同内容、活动组，每个组对于页面的搭建场景，都有各组常用的需求场景，因此，平台可以将有类型特性的页面生成为模板，便于在下次搭建时选择复用。</p></li></ul> <p><a name="gltyvr"></a></p> <h4 id="扩展性"><a href="#扩展性" class="header-anchor">#</a> <a href="#gltyvr"></a>扩展性</h4> <ul><li><p>页面主要由：页面模板、页面脚本、模块脚本组成</p> <ul><li><p>页面模板：使用Xtemplate结合Air语法规范，描述的页面HTML的渲染结构。</p></li> <li><p>页面脚本：主要用于初始化页面基本信息，并渲染模块视图，加载模块脚本。</p></li> <li><p>模块脚本：主要用于在视图渲染完后，执行模块内部逻辑。</p></li></ul></li> <li><p>可根据不同的业务场景，构建不同的扩展规范，即可满足业务</p> <ul><li>以React页面搭建为例，只需要构建React的<code>页面模板</code>、<code>页面脚本</code>、<code>模块脚本</code>，即可实现新的业务搭建方案。</li></ul></li></ul> <p><a name="g9k3zi"></a></p> <h4 id="开放性"><a href="#开放性" class="header-anchor">#</a> <a href="#g9k3zi"></a>开放性</h4> <p>模块只要满足开发规范，与页面的PageInit渲染脚本规范结合，即可完成渲染。</p> <ul><li><p>通用性强：蓝鲸制定的模块规范，支持跨平台使用，最大程度的支持了模块的复用。</p></li> <li><p>多数据源：支持媒资、VMP、SCG、MRP 等多平台数据源导入。</p></li> <li><p>无缝迁移：蓝鲸平台支持大部分淘系的模块规范，可直接注册到平台中使用。</p></li> <li><p>标准规范：上游平台Gaia可根据Sketch的元素结构，按照平台的模块标准规范，生成模块代码，为设计赋能。</p></li></ul> <p>因为搭建业务并不与实际业务耦合，所以平台可以支持各种搭建需求场景，目前已支持业务：商业化平台、优酷活动、内容运营投放，未来会支持更多的业务场景。</p> <p><a name="74h7xo"></a></p> <h4 id="页面的应用场景"><a href="#页面的应用场景" class="header-anchor">#</a> <a href="#74h7xo"></a>页面的应用场景</h4> <p>用户访问流量主要分为以下类型：</p> <ul><li><p>移动端Html5</p></li> <li><p>PC端Html5</p></li> <li><p>移动端Weex容器</p></li></ul> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546425231189-b9b41d9a-7387-4c36-83d3-f5fc79beac9a.png#width=485" alt=""></p> <p><a name="8dk2pa"></a></p> <h3 id="页面结构"><a href="#页面结构" class="header-anchor">#</a> <a href="#8dk2pa"></a>页面结构</h3> <p><a name="y3bmka"></a></p> <h4 id="xtemplate模板渲染"><a href="#xtemplate模板渲染" class="header-anchor">#</a> <a href="#y3bmka"></a>Xtemplate模板渲染</h4> <ul><li><p>平台采用模块依赖分析的方法，有效的解决了模块的：重复引用、版本依赖问题。</p> <ul><li><p>模块打包发布到UPX平台；</p></li> <li><p>生成deps.json文件，来描述模块与组件库之间的依赖关系；</p></li> <li><p>在页面渲染时，分析deps.json将重复引用合并；并合并不同小版本号为最新版本；</p></li> <li><p>将模块的引用依赖的js，组合成CDN地址；</p></li> <li><p>最后由Air平台使用Xtemplate语法渲染页面；</p></li></ul></li> <li><p>页面采用CMD require模块化方案</p> <ul><li><p>模块发布时，会生成index.cmd.js的文件；</p></li> <li><p>通过 <code>g.alicdn.com</code> 服务，将js内容组合到一个js文件地址中；</p></li> <li><p>在页面中使用 require &amp; define 来关联加载js模块；</p></li></ul></li></ul> <p><a name="bsgzha"></a></p> <h4 id="pageinit主要构成"><a href="#pageinit主要构成" class="header-anchor">#</a> <a href="#bsgzha"></a>PageInit主要构成</h4> <ul><li><p>初始化页面DOM元素，将模块的容器元素渲染完成；</p></li> <li><p>获取模块的分桶定投数据；</p></li> <li><p>渲染Module(Xtemplate)模板代码；</p></li> <li><p>加载Module(JavaScript)脚本代码；</p></li></ul> <p><a name="q5g7dx"></a></p> <h4 id="模块主要构成"><a href="#模块主要构成" class="header-anchor">#</a> <a href="#q5g7dx"></a>模块主要构成</h4> <ul><li><p>MockData：用于描述模块的初始化<strong>配置数据</strong>，及本地调试模拟数据内容。</p></li> <li><p>Schema：用于描述<strong>配置数据的结构</strong>，用于在搭建平台渲染表单元素。</p></li> <li><p>Xtemplate：渲染模块的<strong>视图View层</strong>；</p></li> <li><p>Javascript：模块渲染完成后，所执行的<strong>JavaScript脚本代码</strong>；</p></li> <li><p>CSS：模块的<strong>样式信息</strong>；</p></li> <li><p>deps.json：通过npm依赖关系生成的 <strong>组件库依赖描述</strong>；</p></li></ul> <p><a name="hdrihu"></a></p> <h4 id="页面构建流程"><a href="#页面构建流程" class="header-anchor">#</a> <a href="#hdrihu"></a>页面构建流程</h4> <ul><li><p>根据运营页面需求，当运营需要的模块场景，是已有模块已经支撑的，运营只需要在平台中选取需要的模块，平配置相关的数据信息，即可完成页面的搭建。</p></li> <li><p>当模块需求无法满足运营场景时，需要前端开发同学接入，按照运营的需求去开发模块，来满足运营的页面需求。</p></li></ul> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546425245500-359ec111-389b-47c9-abde-82cee6cdef0d.png#width=827" alt=""></p> <p><a name="m8rcgi"></a></p> <h2 id="前端技术方案"><a href="#前端技术方案" class="header-anchor">#</a> <a href="#m8rcgi"></a>前端技术方案</h2> <p><a name="e9o6gi"></a></p> <h3 id="前端项目基础架构图"><a href="#前端项目基础架构图" class="header-anchor">#</a> <a href="#e9o6gi"></a>前端项目基础架构图</h3> <p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/114273/1546522123639-b1a5973d-26c2-4e82-8aed-30c55f0fd5eb.png#width=583" alt=""> <a name="vldnii"></a></p> <h3 id="react"><a href="#react" class="header-anchor">#</a> <a href="#vldnii"></a>React</h3> <ul><li><p>React技术框架，相对于Vue学习曲线复杂一些，但React更灵活些且语法相对优雅。</p></li> <li><p>同时前端的视图组件库选择Fusion-Design，可与设计师协同控制组件样式，也是基于React框架编写。</p></li> <li><p>目前集团平台多数业务级前端框架，也是基于React框架编写，选择React对于集团已积累的技术平台开放性更好。</p></li></ul> <p><a name="oqeinv"></a></p> <h3 id="redux-react-redux"><a href="#redux-react-redux" class="header-anchor">#</a> <a href="#oqeinv"></a>Redux/React-Redux</h3> <p>主要用于解决复杂页面多视图组件，需要共享同一份数据状态的问题。</p> <ul><li><p>创建Action，声明type类型，附加payload 或其他数据节点，作为事件源。</p></li> <li><p>创建Reducer，用于接收Action事件源，并将数据处理后的结果，写入状态树（Store）。</p></li> <li><p>创建Middleware，统一处理Action数据流的中间环节，例如Fetch解析、Log记录等。</p></li></ul> <p><a name="7k7slv"></a></p> <h3 id="es6"><a href="#es6" class="header-anchor">#</a> <a href="#7k7slv"></a>ES6</h3> <ul><li><p>本项目以ES6语法提案，为项目的开发标准，使用babel-stage-0编译器，支持ES6 stage-1~4的所有语法提案。</p></li> <li><p>具体语法详解，可参看：阮一峰老师的ES6详解 <a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer">http://es6.ruanyifeng.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <p><a name="9k0uky"></a></p> <h3 id="fusion-design"><a href="#fusion-design" class="header-anchor">#</a> <a href="#9k0uky"></a>Fusion-Design</h3> <ul><li><p>Fusion框架：通过前端与设计分离的方式，全面提升设计开发效率，解决了设计与开发强耦合的问题。</p></li> <li><p>基于Fusion框架，蓝鲸平台又封装迭代了以下组件库：</p> <ul><li><p>动态表单渲染：DynamicForm</p></li> <li><p>动态表格组件：DynamicTable</p></li> <li><p>文件上传组件：Uploader</p></li> <li><p>弹窗浮层管理器：EnhanceLayerManager</p></li></ul></li></ul> <p><a name="wvkgga"></a></p> <h3 id="数据监控"><a href="#数据监控" class="header-anchor">#</a> <a href="#wvkgga"></a>数据监控</h3> <ul><li><p>使用RetCode 监控window.onerror</p></li> <li><p>网络请求组件Fetch，接入了RetCode，监控了接口请求失败情况。</p></li></ul> <p><a name="d1m3zf"></a></p> <h2 id="node端技术方案"><a href="#node端技术方案" class="header-anchor">#</a> <a href="#d1m3zf"></a>Node端技术方案</h2> <p><a name="2gmtgt"></a></p> <h2 id="后端技术框架"><a href="#后端技术框架" class="header-anchor">#</a> <a href="#2gmtgt"></a>后端技术框架</h2> <p>因为平台主要面向于内部BU使用，Node端选择集团提供的统一技术框架【Begg】。Begg集成了集团内部常用的插件：如HSF、BUC、ACL、Diamond、Oplog、MySQL等常用插件，便于快速构建后端服务项目与部署。</p> <p><a name="s65lns"></a></p> <h3 id="前端代码模板化"><a href="#前端代码模板化" class="header-anchor">#</a> <a href="#s65lns"></a>前端代码模板化</h3> <ul><li><p>通过Diamond管理前端版本号</p></li> <li><p>ACL多系统菜单/权限共享</p></li></ul> <p><a name="nr2foi"></a></p> <h3 id="日志跟踪"><a href="#日志跟踪" class="header-anchor">#</a> <a href="#nr2foi"></a>日志跟踪</h3> <ul><li>通过CustomLogger记录了三个维度的数据日志</li></ul> <p><img src="https://cdn.nlark.com/lark/0/2018/png/114273/1539534486138-03d69d23-e56c-40ff-b78c-d7589e9a478d.png#width=384" alt=""></p> <div class="language- extra-class"><pre class="language-text"><code>
* hsfLogger：用于记录所有hsf调用时的错误日志；
* reqLogger：用于记录接口内部逻辑处理的未捕获ThrowError错误；
* sqlLogger：用于记录所有数据库读写时的错误日志；

</code></pre></div><ul><li>并将三种日志记录，统一扩展到ctx.extend，对日志统一格式化处理</li></ul> <p><img src="https://cdn.nlark.com/lark/0/2018/png/114273/1539534873756-18c63398-8c83-4dea-9e10-be95265928a8.png#width=507" alt=""></p> <p><a name="vw7yxc"></a></p> <h2 id="平台未来的思考与规划"><a href="#平台未来的思考与规划" class="header-anchor">#</a> <a href="#vw7yxc"></a>平台未来的思考与规划</h2> <ul><li><p>可视化数据平台</p> <ul><li><p>实时数据平台</p></li> <li><p>内容动态切换</p></li></ul></li> <li><p>用户分层全量数据分析</p></li> <li><p>数据报警平台</p> <ul><li>定义数据指标，定时检查推送报警邮件</li></ul></li> <li><p>设计图一键生成搭建页面</p></li> <li><p>模块分析识别，智能AI搭建</p></li> <li><p>页面跑分系统，性能优化</p></li> <li><p>物料图库数据进一步打通完全一站式</p></li></ul></div> <!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/16/2021, 7:06:55 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.1c84c946.js" defer></script><script src="/blog/assets/js/4.3835d62b.js" defer></script><script src="/blog/assets/js/2.5b556ab7.js" defer></script><script src="/blog/assets/js/52.a1565c31.js" defer></script>
  </body>
</html>
